{% load humanize %}
<div class="kanban-task card cursor-grab" draggable="true">
    <div class="card-body d-flex gap-1">
        {% comment %} Checkbox to update status {% endcomment %}
        {% include "components/status-checkbox-form.html" with pk=task.id status=task.status id="status-form-{{ task.id }}" %}
        {% comment %} Details {% endcomment %}
        <div class="d-flex flex-column align-items-start w-100">
            {% comment %} Title that opens modal {% endcomment %}
            <button type="button"
                    class="card-title btn btn-unstyled underline-hover text-start m-0 p-0 w-100"
                    data-bs-toggle="modal"
                    data-bs-target="#modal-{{ task.id }}">{{ task.title }}</button>
            {% comment %} Date and priority {% endcomment %}
            <div class="d-flex gap-1">
                <i class="bi bi-flag-fill {% if task.priority == 0 %}text-info{% elif task.priority == 1 %}text-warning{% elif task.priority == 2 %}text-danger{% endif %}"></i>
                {% if task.due_date %}
                    <small class="{% if task.is_overdue %}text-danger{% else %}text-muted{% endif %} ">{{ task.due_date|naturaltime }}</small>
                {% endif %}
            </div>
        </div>
        {% comment %} Dropdown menu {% endcomment %}
        <div class="dropdown ms-auto">
            <button type="button" class="btn btn-unstyled" data-bs-toggle="dropdown">
                <i class="bi bi-three-dots-vertical"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
                <li>
                    <button class="dropdown-item">Action</button>
                </li>
            </ul>
        </div>
    </div>
</div>
